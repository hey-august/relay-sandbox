"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toSnakeCaseKeys = void 0;
const common_1 = require("./common");
const toSnakeCaseKeys = (obj, transform = (value) => value, result = {}) => {
    if (Array.isArray(obj)) {
        result = obj.map((item, index) => {
            if (typeof item === 'object') {
                return (0, exports.toSnakeCaseKeys)(item, transform, result[index]);
            }
            return item;
        });
    }
    else {
        Object.keys(obj).forEach((key) => {
            const newKey = (0, common_1.fromCamelToSnakeCase)(key);
            // Both 'object's and arrays will enter this branch
            if (obj[key] && typeof obj[key] === 'object') {
                result[newKey] = (0, exports.toSnakeCaseKeys)(obj[key], transform, result[newKey]);
            }
            else {
                result[newKey] = transform(obj[key]);
            }
        });
    }
    return result;
};
exports.toSnakeCaseKeys = toSnakeCaseKeys;
//# sourceMappingURL=toSnakeCaseKeys.js.map