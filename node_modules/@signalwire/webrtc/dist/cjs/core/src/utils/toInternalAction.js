"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.toInternalAction = void 0;
const common_1 = require("./common");
const toInternalAction = (event) => {
    const { event_type, params, node_id } = event;
    /**
     * queuing.relay.tasks has a slightly different shape:
     * no nested "params" so we return the whole event.
     */
    if (event_type === 'queuing.relay.tasks') {
        return {
            type: event_type,
            payload: event,
        };
    }
    /**
     * `webrtc.*` events need to carry the node_id with them
     */
    if ((0, common_1.isWebrtcEventType)(event_type) && (params === null || params === void 0 ? void 0 : params.jsonrpc)) {
        const vertoRPC = params;
        if (vertoRPC.params) {
            vertoRPC.params.nodeId = node_id;
        }
        return {
            type: event_type,
            payload: vertoRPC,
        };
    }
    return {
        type: event_type,
        payload: params,
    };
};
exports.toInternalAction = toInternalAction;
//# sourceMappingURL=toInternalAction.js.map