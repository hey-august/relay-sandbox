"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sessionStorage = exports.localStorage = void 0;
const tslib_1 = require("tslib");
// @ts-nocheck
const __1 = require("../");
const _inNode = () => typeof window === 'undefined' && typeof process !== 'undefined';
const _get = (storageType, key) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    if (_inNode())
        return null;
    const res = window[storageType].getItem((0, __1.mutateStorageKey)(key));
    return (0, __1.safeParseJson)(res);
});
const _set = (storageType, key, value) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    if (_inNode())
        return null;
    if (typeof value === 'object') {
        value = JSON.stringify(value);
    }
    window[storageType].setItem((0, __1.mutateStorageKey)(key), value);
});
const _remove = (storageType, key) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    if (_inNode())
        return null;
    return window[storageType].removeItem((0, __1.mutateStorageKey)(key));
});
exports.localStorage = {
    getItem: (key) => _get('localStorage', key),
    setItem: (key, value) => _set('localStorage', key, value),
    removeItem: (key) => _remove('localStorage', key),
};
exports.sessionStorage = {
    getItem: (key) => _get('sessionStorage', key),
    setItem: (key, value) => _set('sessionStorage', key, value),
    removeItem: (key) => _remove('sessionStorage', key),
};
//# sourceMappingURL=index.js.map