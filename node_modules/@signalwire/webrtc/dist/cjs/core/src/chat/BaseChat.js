"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createBaseChatObject = exports.BaseChatAPI = exports.BaseChatConsumer = void 0;
const tslib_1 = require("tslib");
const __1 = require("..");
const pubSub_1 = require("../pubSub");
const constants_1 = require("../utils/constants");
const chatMethods = tslib_1.__importStar(require("./methods"));
const chatWorker_1 = require("./workers/chatWorker");
class BaseChatConsumer extends pubSub_1.BasePubSubConsumer {
    constructor(options) {
        super(options);
        this.subscribeMethod = `${constants_1.PRODUCT_PREFIX_CHAT}.subscribe`;
    }
    initWorker() {
        this.runWorker('chat', { worker: chatWorker_1.chatWorker });
    }
}
exports.BaseChatConsumer = BaseChatConsumer;
exports.BaseChatAPI = (0, __1.extendComponent)(BaseChatConsumer, {
    publish: chatMethods.publish,
    getMembers: chatMethods.getMembers,
    getMessages: chatMethods.getMessages,
    setMemberState: chatMethods.setMemberState,
    getMemberState: chatMethods.getMemberState,
});
const createBaseChatObject = (params) => {
    const chat = (0, __1.connect)({
        store: params.store,
        Component: exports.BaseChatAPI,
    })(params);
    return chat;
};
exports.createBaseChatObject = createBaseChatObject;
//# sourceMappingURL=BaseChat.js.map