"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const _1 = require(".");
const testUtils_1 = require("./testUtils");
describe('BaseConsumer', () => {
    describe('subscribe', () => {
        let instance;
        let fullStack;
        beforeEach(() => {
            fullStack = (0, testUtils_1.configureFullStack)();
            instance = (0, _1.connect)({
                store: fullStack.store,
                Component: _1.BaseConsumer,
            })({
                emitter: fullStack.emitter,
            });
            instance.execute = jest.fn();
        });
        afterEach(() => {
            fullStack.destroy();
        });
        it('should be idempotent', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            instance.on('something-1', () => { });
            instance.on('something-2', () => { });
            instance.on('something-2', () => { });
            yield instance.subscribe();
            yield instance.subscribe();
            yield instance.subscribe();
            yield instance.subscribe();
            yield instance.subscribe();
            expect(instance.execute).toHaveBeenCalledTimes(1);
        }));
    });
});
//# sourceMappingURL=BaseConsumer.test.js.map