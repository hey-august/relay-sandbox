"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.eventChannel = exports.createCatchableSaga = exports.createRestartableSaga = void 0;
const effects_1 = require("@redux-saga/core/effects");
const utils_1 = require("../../utils");
const createRestartableSaga = (saga) => {
    return function* () {
        (0, effects_1.spawn)(function* () {
            while (true) {
                try {
                    (0, utils_1.getLogger)().debug('Run a restartable saga');
                    yield (0, effects_1.call)(saga);
                    (0, utils_1.getLogger)().debug('One of the restartable saga has ended. Restarting..');
                }
                catch (error) {
                    (0, utils_1.getLogger)().error('Restartable Saga Error', error);
                }
            }
        });
    };
};
exports.createRestartableSaga = createRestartableSaga;
const defaultCatchHandler = (error) => (0, utils_1.getLogger)().error('Catchable Saga Error', error);
const createCatchableSaga = (saga, errorHandler = defaultCatchHandler) => {
    return function* (...params) {
        try {
            yield (0, effects_1.call)(saga, ...params);
        }
        catch (error) {
            errorHandler(error);
        }
    };
};
exports.createCatchableSaga = createCatchableSaga;
var core_1 = require("@redux-saga/core");
Object.defineProperty(exports, "eventChannel", { enumerable: true, get: function () { return core_1.eventChannel; } });
//# sourceMappingURL=sagaHelpers.js.map