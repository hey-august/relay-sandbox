"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useSession = void 0;
const utils_1 = require("../../utils");
const EventEmitter_1 = require("../../utils/EventEmitter");
const useSession = (options) => {
    const { SessionConstructor, userOptions, sessionChannel } = options;
    const sessionEmitter = (0, EventEmitter_1.getEventEmitter)();
    let session = null;
    const initSession = () => {
        session = new SessionConstructor(Object.assign(Object.assign({}, userOptions), { sessionChannel }));
        return session;
    };
    const getSession = () => {
        if (!session) {
            (0, utils_1.getLogger)().warn('Custom worker started without the session');
        }
        return session;
    };
    return { session, initSession, getSession, sessionEmitter };
};
exports.useSession = useSession;
//# sourceMappingURL=useSession.js.map