"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sessionAuthWorker = void 0;
const core_1 = require("@signalwire/core");
const sessionAuthWorker = function* (options) {
    (0, core_1.getLogger)().debug('sessionAuthWorker started');
    const { instance } = options;
    const action = yield core_1.sagaEffects.take([
        core_1.actions.authSuccessAction.type,
        core_1.actions.authErrorAction.type,
    ]);
    switch (action.type) {
        case core_1.actions.authSuccessAction.type:
            yield core_1.sagaEffects.call([instance, instance.resume]);
            break;
        case core_1.actions.authErrorAction.type:
            yield core_1.sagaEffects.call([instance, instance.setState], 'hangup');
            break;
    }
    (0, core_1.getLogger)().debug('sessionAuthWorker ended');
};
exports.sessionAuthWorker = sessionAuthWorker;
//# sourceMappingURL=sessionAuthWorker.js.map